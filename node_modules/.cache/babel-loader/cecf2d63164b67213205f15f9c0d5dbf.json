{"ast":null,"code":"var _jsxFileName = \"/Users/ago/rails-react-app/frontend/src/components/pages/SignIn.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useContext } from \"react\";\nimport { useHistory, Link } from \"react-router-dom\";\nimport Cookies from \"js-cookie\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { Typography } from \"@material-ui/core\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Card from \"@material-ui/core/Card\";\nimport CardContent from \"@material-ui/core/CardContent\";\nimport CardHeader from \"@material-ui/core/CardHeader\";\nimport Button from \"@material-ui/core/Button\";\nimport Box from \"@material-ui/core/Box\";\nimport { AuthContext } from \"App\";\nimport AlertMessage from \"components/utils/AlertMessage\";\nimport { signIn } from \"lib/api/auth\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst useStyles = makeStyles(theme => ({\n  container: {\n    marginTop: theme.spacing(6)\n  },\n  submitBtn: {\n    marginTop: theme.spacing(2),\n    flexGrow: 1,\n    textTransform: \"none\"\n  },\n  header: {\n    textAlign: \"center\"\n  },\n  card: {\n    padding: theme.spacing(2),\n    maxWidth: 400\n  },\n  box: {\n    marginTop: \"2rem\"\n  },\n  link: {\n    textDecoration: \"none\"\n  }\n})); // サインイン用ページ\n\nconst SignIn = () => {\n  _s();\n\n  const classes = useStyles();\n  const history = useHistory();\n  const {\n    setIsSignedIn,\n    setCurrentUser\n  } = useContext(AuthContext);\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [alertMessageOpen, setAlertMessageOpen] = useState(false);\n\n  const handleSubmit = async e => {\n    e.preventDefault();\n    const data = {\n      email: email,\n      password: password\n    };\n\n    try {\n      const res = await signIn(data);\n      console.log(res);\n\n      if (res.status === 200) {\n        // 成功した場合はCookieに各値を格納\n        Cookies.set(\"_access_token\", res.headers[\"access-token\"]);\n        Cookies.set(\"_client\", res.headers[\"client\"]);\n        Cookies.set(\"_uid\", res.headers[\"uid\"]);\n        setIsSignedIn(true);\n        setCurrentUser(res.data.data);\n        history.push(\"/\");\n        console.log(\"Signed in successfully!\");\n      } else {\n        setAlertMessageOpen(true);\n      }\n    } catch (err) {\n      console.log(err);\n      setAlertMessageOpen(true);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"form\", {\n      noValidate: true,\n      autoComplete: \"off\",\n      children: /*#__PURE__*/_jsxDEV(Card, {\n        className: classes.card,\n        children: [/*#__PURE__*/_jsxDEV(CardHeader, {\n          className: classes.header,\n          title: \"\\u30B5\\u30A4\\u30F3\\u30A4\\u30F3\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(CardContent, {\n          children: [/*#__PURE__*/_jsxDEV(TextField, {\n            variant: \"outlined\",\n            required: true,\n            fullWidth: true,\n            label: \"\\u30E1\\u30FC\\u30EB\\u30A2\\u30C9\\u30EC\\u30B9\",\n            value: email,\n            margin: \"dense\",\n            onChange: event => setEmail(event.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(TextField, {\n            variant: \"outlined\",\n            required: true,\n            fullWidth: true,\n            label: \"\\u30D1\\u30B9\\u30EF\\u30FC\\u30C9\",\n            type: \"password\",\n            placeholder: \"6\\u6587\\u5B57\\u4EE5\\u4E0A\",\n            value: password,\n            margin: \"dense\",\n            autoComplete: \"current-password\",\n            onChange: event => setPassword(event.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              textAlign: \"right\"\n            },\n            children: /*#__PURE__*/_jsxDEV(Button, {\n              type: \"submit\",\n              variant: \"outlined\",\n              color: \"primary\",\n              disabled: !email || !password ? true : false,\n              className: classes.submitBtn,\n              onClick: handleSubmit,\n              children: \"\\u9001\\u4FE1\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 115,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Box, {\n            textAlign: \"center\",\n            className: classes.box,\n            children: /*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"body2\",\n              children: [\"\\u307E\\u3060\\u30A2\\u30AB\\u30A6\\u30F3\\u30C8\\u3092\\u304A\\u6301\\u3061\\u3067\\u306A\\u3044\\u65B9\\u306F\", /*#__PURE__*/_jsxDEV(Link, {\n                to: \"/signup\",\n                className: classes.link,\n                children: \"\\u3053\\u3061\\u3089\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 129,\n                columnNumber: 17\n              }, this), \"\\u304B\\u3089\\u4F5C\\u6210\\u3057\\u3066\\u304F\\u3060\\u3055\\u3044\\u3002\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 127,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 126,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(AlertMessage // エラーが発生した場合はアラートを表示\n    , {\n      open: alertMessageOpen,\n      setOpen: setAlertMessageOpen,\n      severity: \"error\",\n      message: \"\\u30E1\\u30FC\\u30EB\\u30A2\\u30C9\\u30EC\\u30B9\\u304B\\u30D1\\u30B9\\u30EF\\u30FC\\u30C9\\u304C\\u9593\\u9055\\u3063\\u3066\\u3044\\u307E\\u3059\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\n_s(SignIn, \"YTrU+Py59r01c6vc1mpDz/AkVAc=\", false, function () {\n  return [useStyles, useHistory];\n});\n\n_c = SignIn;\nexport default SignIn;\n\nvar _c;\n\n$RefreshReg$(_c, \"SignIn\");","map":{"version":3,"sources":["/Users/ago/rails-react-app/frontend/src/components/pages/SignIn.tsx"],"names":["React","useState","useContext","useHistory","Link","Cookies","makeStyles","Typography","TextField","Card","CardContent","CardHeader","Button","Box","AuthContext","AlertMessage","signIn","useStyles","theme","container","marginTop","spacing","submitBtn","flexGrow","textTransform","header","textAlign","card","padding","maxWidth","box","link","textDecoration","SignIn","classes","history","setIsSignedIn","setCurrentUser","email","setEmail","password","setPassword","alertMessageOpen","setAlertMessageOpen","handleSubmit","e","preventDefault","data","res","console","log","status","set","headers","push","err","event","target","value"],"mappings":"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","sourcesContent":["import React, { useState, useContext } from \"react\"\nimport { useHistory, Link } from \"react-router-dom\"\nimport Cookies from \"js-cookie\"\n\nimport { makeStyles, Theme } from \"@material-ui/core/styles\"\nimport { Typography } from \"@material-ui/core\"\nimport TextField from \"@material-ui/core/TextField\"\nimport Card from \"@material-ui/core/Card\"\nimport CardContent from \"@material-ui/core/CardContent\"\nimport CardHeader from \"@material-ui/core/CardHeader\"\nimport Button from \"@material-ui/core/Button\"\nimport Box from \"@material-ui/core/Box\"\n\nimport { AuthContext } from \"App\"\nimport AlertMessage from \"components/utils/AlertMessage\"\nimport { signIn } from \"lib/api/auth\"\nimport { SignInData } from \"interfaces/index\"\n\nconst useStyles = makeStyles((theme: Theme) => ({\n  container: {\n    marginTop: theme.spacing(6)\n  },\n  submitBtn: {\n    marginTop: theme.spacing(2),\n    flexGrow: 1,\n    textTransform: \"none\"\n  },\n  header: {\n    textAlign: \"center\"\n  },\n  card: {\n    padding: theme.spacing(2),\n    maxWidth: 400\n  },\n  box: {\n    marginTop: \"2rem\"\n  },\n  link: {\n    textDecoration: \"none\"\n  }\n}))\n\n// サインイン用ページ\nconst SignIn: React.FC = () => {\n  const classes = useStyles()\n  const history = useHistory()\n\n  const { setIsSignedIn, setCurrentUser } = useContext(AuthContext)\n\n  const [email, setEmail] = useState<string>(\"\")\n  const [password, setPassword] = useState<string>(\"\")\n  const [alertMessageOpen, setAlertMessageOpen] = useState<boolean>(false)\n\n  const handleSubmit = async (e: React.MouseEvent<HTMLButtonElement>) => {\n    e.preventDefault()\n\n    const data: SignInData = {\n      email: email,\n      password: password\n    }\n\n    try {\n      const res = await signIn(data)\n      console.log(res)\n\n      if (res.status === 200) {\n        // 成功した場合はCookieに各値を格納\n        Cookies.set(\"_access_token\", res.headers[\"access-token\"])\n        Cookies.set(\"_client\", res.headers[\"client\"])\n        Cookies.set(\"_uid\", res.headers[\"uid\"])\n\n        setIsSignedIn(true)\n        setCurrentUser(res.data.data)\n\n        history.push(\"/\")\n\n        console.log(\"Signed in successfully!\")\n      } else {\n        setAlertMessageOpen(true)\n      }\n    } catch (err) {\n      console.log(err)\n      setAlertMessageOpen(true)\n    }\n  }\n\n  return (\n    <>\n      <form noValidate autoComplete=\"off\">\n        <Card className={classes.card}>\n          <CardHeader className={classes.header} title=\"サインイン\" />\n          <CardContent>\n            <TextField\n              variant=\"outlined\"\n              required\n              fullWidth\n              label=\"メールアドレス\"\n              value={email}\n              margin=\"dense\"\n              onChange={event => setEmail(event.target.value)}\n            />\n            <TextField\n              variant=\"outlined\"\n              required\n              fullWidth\n              label=\"パスワード\"\n              type=\"password\"\n              placeholder=\"6文字以上\"\n              value={password}\n              margin=\"dense\"\n              autoComplete=\"current-password\"\n              onChange={event => setPassword(event.target.value)}\n            />\n            <div style={{ textAlign: \"right\" }} >\n              <Button\n                type=\"submit\"\n                variant=\"outlined\"\n                color=\"primary\"\n                disabled={!email || !password ? true : false}\n                className={classes.submitBtn}\n                onClick={handleSubmit}\n              >\n                送信\n              </Button>\n            </div>\n            <Box textAlign=\"center\" className={classes.box}>\n              <Typography variant=\"body2\">\n                まだアカウントをお持ちでない方は\n                <Link to=\"/signup\" className={classes.link}>\n                  こちら\n                </Link>\n                 から作成してください。\n              </Typography>\n            </Box>\n          </CardContent>\n        </Card>\n      </form>\n      <AlertMessage // エラーが発生した場合はアラートを表示\n        open={alertMessageOpen}\n        setOpen={setAlertMessageOpen}\n        severity=\"error\"\n        message=\"メールアドレスかパスワードが間違っています\"\n      />\n    </>\n  )\n}\n\nexport default SignIn\n"]},"metadata":{},"sourceType":"module"}